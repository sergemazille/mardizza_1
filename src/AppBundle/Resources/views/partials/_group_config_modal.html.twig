{# modal config #}
<div :id="group.id" class="modal fade" role="dialog" tabindex="-1" v-if="group.userIsAdmin">
    <div class="modal-dialog modal-lg" role="document">

        <div class="modal-content">

            <div class="modal-header">
                <button @click.prevent="revertChanges" type="button" class="close" data-dismiss="modal">&times;</button>
                <h3 class="modal-title">${ group.name }</h3>
            </div>

            <validator name="validation">
                <form novalidate :id="group.id" action="/group/update/${group.id}" method="POST" @submit.prevent="updateGroup" enctype="multipart/form-data">
                    <input type="hidden" name="csrf" :value="`{{ csrf_token('group_token') }}`" v-model="csrf">

                    <div class="modal-body">

                        <div class="errors">
                            <p v-if="$validation.groupname.required">Le nom du groupe ne peut pas être vide</p>
                            <p v-if="$validation.groupname.maxlength">Le nom du groupe doit contenir maximum 14 caractères</p>
                        </div>

                        <div class="row">
                            {# config #}
                            <div class="col-xs-12 col-sm-6 config">

                                {# name #}
                                <div class="form-group">
                                    <label>Nom du groupe :</label>
                                    <input type="text" v-model="group.name" class="form-control" name="name" v-validate:groupname="{ required: true, maxlength: 14 }">
                                </div>

                                {# color #}
                                <div class="form-group">
                                    <label>Couleur du groupe :</label>
                                    <input type="color" v-model="group.color" class="form-control" name="color">
                                </div>

                                {# image #}
                                <div class="form-group">
                                    <p>Image du groupe :</p>
                                    <label class="btn btn-success btn-block btn-file">
                                        Parcourir<span class="fa fa-picture-o pull-right"></span>
                                        <input type="file" class="hidden" name="image" v-el:fileInput v-model="newImageFlag" accept="image/jpeg, image/gif, image/png">
                                    </label>
                                </div>

                                {# fidelity card stamps management #}
                                <div class="form-group">
                                    <label>Nombre de tampons :</label>
                                    <input type="number" v-model="group.stamps" class="form-control" name="stamps">
                                </div>
                            </div>

                            <div class="col-xs-12 col-sm-6 members">

                                {# group members #}
                                <div class="row table-header">
                                    <div class="col-xs-6">
                                        <div class="col-xs-4 text-left">Admin</div>
                                        <div>Membre</div>
                                    </div>

                                    <div v-if="group.members.length > 1" class="col-xs-6">
                                        <div class="col-xs-4 text-left">Admin</div>
                                        <div>Membre</div>
                                    </div>

                                </div>

                                <div class="row">
                                    <div class="member" v-for="member in group.members">
                                        <div class="col-xs-6">
                                            <div class="form-group">
                                                <label>
                                                    <input type="checkbox"
                                                           :checked="member.isAdmin" value="${member.id}" v-model="adminIds"
                                                           name="memberIds"
                                                           class="member-username"
                                                    >
                                                    ${member.username}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {# invite button #}
                                <button class="btn btn-success btn-block" @click.prevent="openInvitation()">Inviter un nouveau membre <span class="fa fa-user pull-right"></span></button>
                                <div class="input-group" v-if="invitationOn">
                                    <input type="email" placeholder="email de la personne" :value="" v-model="mailTo" class="form-control">
                                    <span class="input-group-btn">
                                        <button class="btn btn-primary" type="button" @click.prevent="sendInvitation()">Envoyer &nbsp;<span class="fa fa-envelope-o"></span></button>
                                    </span>
                                </div>

                            </div>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button v-if="!userIsLastMember() && !userIsLastAdmin()" @click.prevent="quitGroup" type="button" class="btn btn-warning pull-left">Quitter ce groupe</button>
                        <button @click.prevent="confirmDeleteGroup" type="button" class="btn btn-danger pull-left">Supprimer ce groupe</button>
                        <button @click.prevent="revertChanges" type="button" class="btn btn-default" data-dismiss="modal">Annuler</button>
                        <button type="submit" class="btn btn-primary" v-if="$validation.valid">Enregistrer</button>
                    </div>
                </form>
            </validator>
        </div>

    </div>
</div>